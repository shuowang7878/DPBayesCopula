% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/truncated_geometric_mechanism.R
\name{truncated_geometric_mechanism}
\alias{truncated_geometric_mechanism}
\title{Truncated geometric mechanisms for counts}
\usage{
truncated_geometric_mechanism(
  counts,
  n = NULL,
  total_epsilon = NULL,
  epsilon = NULL,
  sensitivity,
  method = c("RTG", "TGM", "BTGM"),
  lower = NULL,
  upper = NULL,
  round_output = FALSE
)
}
\arguments{
\item{counts}{Numeric vector of counts (length \code{d}). Each element must
lie within its corresponding \code{[lower_i, upper_i]}.}

\item{n}{Optional integer; total sample size used only to set default bounds
when \code{lower} or \code{upper} is missing.}

\item{total_epsilon}{Optional positive scalar specifying the total privacy
budget for all coordinates combined. If supplied together with
\code{epsilon}, the sum of \code{epsilon} must equal \code{total_epsilon}.}

\item{epsilon}{Optional positive numeric specifying per-coordinate privacy
budgets. May be a scalar (replicated to length \code{d}) or a
length-\code{d} vector. If \code{epsilon} is not supplied but
\code{total_epsilon} is provided, then the default per-coordinate
allocation is \code{total_epsilon / d}.}

\item{sensitivity}{Positive numeric; scalar or length-\code{d} vector;
elementwise \eqn{\ell_1}-sensitivity.}

\item{method}{Character; one of \code{"RTG"}, \code{"TGM"}, \code{"BTGM"}.}

\item{lower, upper}{Integer bounds; scalar or length-\code{d} vectors. If both
are missing, they default to \code{0} and \code{n}, respectively.}

\item{round_output}{Logical; if \code{TRUE} and \code{method = "BTGM"},
rounds the posterior expectation before truncation.}
}
\value{
A numeric vector of perturbed counts with the same length and names
as \code{counts}.
}
\description{
Applies one of three truncated geometric mechanisms to a numeric vector of
counts. Each coordinate \code{i} has its own valid integer range
\code{[lower_i, upper_i]}, sensitivity \code{Delta_i}, and privacy budget
\code{epsilon_i}.
}
\details{
The following mechanisms are implemented:
\describe{
\item{\code{"RTG"}}{Renormalized truncated geometric mechanism. A renormalized
geometric distribution on \code{lower_i,...,upper_i} is used, with the
privacy-adjusted geometric parameter obtained by solving a root
equation.}

\item{\code{"TGM"}}{Truncated geometric mechanism. Noise is first
added to each count using a geometric mechanism, and
the resulting value is truncated to the valid range
\code{lower_i,...,upper_i}.}

\item{\code{"BTGM"}}{Bayesian-inspired truncated geometric mechanism.
Noise is first added to each count using a geometric mechanism,
followed by a Bayesian-type posterior expectation
estimator under a uniform prior on \code{lower_i,...,upper_i}.
The user may choose whether to round the posterior expectation.}
}
}
\examples{
counts <- c(10, 15, 20)
noisy  <- truncated_geometric_mechanism(
  counts        = counts,
  n             = 50,
  total_epsilon = 1,
  sensitivity   = 1,
  method        = "BTGM",
  round_output  = TRUE
)
noisy

}
